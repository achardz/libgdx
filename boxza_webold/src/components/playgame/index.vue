<template>
  <section class="bg-reward" id="tick-scoll">
    <v-contrainer fluid class="main-reward" id="playgame">
      <v-row style="margin: 0px;">
        <div
          class="is-hidden-touch is-hidden-tablet-only is-hidden-desktop-only is-hidden-widescreen-only"
        >
          <v-row style="margin: 0px;">
            <v-col cols="11" no-gutters>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                width="456"
                height="52"
              >
                <path
                  d="M1079,1531h457l-24.39,52H1079v-52Z"
                  fill="#ff1170"
                  transform="translate(-1080 -1531)"
                />
                <image
                  id="Vector_Smart_Object_copy"
                  data-name="Vector Smart Object copy"
                  x="45"
                  y="8"
                  width="35"
                  height="35"
                  xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAMAAAApB0NrAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACH1BMVEUAAAD35Jb134L02m/y1Fbwz0Dwzjzy0k/z12Dz2Gbvyi745p3023Lwzj/wzDby1Vrx0Uz67bn13n3y1Vnvyi746KLy1Fbwz0Hy1FT45p3wzj/vyzPy1FX46KTy1FT57bbx0ETvyzTx0Ef++uzz12Hwz0Dvyi7345Dy01H89trxz0LvyjDwzDX24o7y01L////y1VjwzDbvyi767rzwz0H345Ly01P13Xnx0Unz2GTwzTry1Fbz2GX13Xnx0Ur35JTy1Fb677/x0Eb////y1Vn345Ly1Fb99+HwzTr35JXy1Ff+/PLz12Lxz0L678DwzDXy1Fb56q3z1l/46anz12L567Dy1Vjxz0Lz2GT89NX24ITz12Dy01P567L13Xnwz0DwzDfz12Hz2Wj89NX345D03HXy1Vnxz0Lwzj7y01Pz2Gf13Hby01DvyzHvyi7vyi/wzDjvyzDwzTnvyjD02mv56qv134H///7////345L788/++/DvyzTy1FX13nz89NPwzDXx0Eby1Vj02Wr+/fb13n7y1Vrx0Uv24o3+++/+/fXy1Fb03HT35pzwzTr9+en+/fjy01Px0Un8997z1l/y1FfwzTv78sv99+Hx0kzvyzL67rz89djwzj7456L78cn89NT+/ffwzDf//vzy1Vvz2Gb133/z2GT67bj46Kbxz0Lz2Gf9+OH02Wn56q335Zn24Yv567D02m3wz0AAAADGRQLuAAAAbXRSTlMABnTF7Pv768NxCivF/f3DKgy6tg5E9vVCZ/7+ZGdjP/79Ogv08g2yqyL+/iG7tAf7+whgV7iv5eD49/755uG8smVZCfzBuCkiuq8Q9vRJ/j9zanVsUPn3SRTFvxE20P7+zDIPgs7x/f3wy38Mdn3kSAAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAHdElNRQfkCBwQBTAsNjdLAAABuUlEQVQ4y2NgQABGJmYW1ty8fDZ2Dk4uBmyAm4c3DwH4+AUwVAgKFeShgkJhEVQlomJ5mEBcAlmJpFQeNiAtg1AiW5SHHRTLwZTIK+ThAopKECXKKsiiJaVlyFxVNbAadRQl5RUVlcgCGiAlmlrIQlUVFRXVNUgC2jpANbrISmorQKAOWUiPgUHfAFmgFKymHlnI0IjBGM5paGxqbgGrqWhta0cEuwmDKZTV0VmBCrpKiyEyZgzmEEZ3BSZohUhZMFhCGD1Y1PRCpKwYrCGMvn4MJRMmQn3PAGXkTZqMpqRzCszRDFNhrGnTUZTMmAkPRQYbuB9nzUZSMmcuXNyKwRYRWvOQ1MxHCNsx2CM4C5DULMyFCzswOMLZixYju2cJXNyJwdkFxl6K4uYOpPhicIVxloHlqpavANMrYcJuwLThvgoWQguBgbIMyFi9pqKifC1UtNADlMg8YTqa1q2H+Lhmw8ZNMEEvcFr19snDDXwh6ZnBD3e+8A+AZZ5AnPkrCJEJgzdjVSIdgpyZQ8OwKAmPQC0UIqMwyo3oGIzSJTYuHklFQmIS1lIqOSU1LR1YjmVkZmXnIIkDADCIr8TJG+v5AAAAAElFTkSuQmCC"
                />
                <text
                  id="กล่องที่เปิดไปแล้ว"
                  y="8"
                  class="cls-1"
                  fill="white"
                  transform="translate(88.126 18.578) scale(2 2)"
                  font-family="DB Helvethaica X Bd Cond"
                >
                  รางวัลที่เปิดได้ในขณะนี้
                </text>
              </svg>
            </v-col>
            <v-col cols="1" class="text-right" style="position: absolute; right: 5.7in;">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                width="7.208in"
                height="0.722in"
              >
                <path
                  fill-rule="evenodd"
                  opacity="0.71"
                  fill="rgb(37, 29, 73)"
                  d="M0.0,0.000 L725.000,-0.000 L725.000,52.000 L15.000,52.000 L20.000,52.000 Z"
                />
                <image
                  x="25"
                  y="10"
                  max-width="100px"
                  :href="require('~/assets/images/boxcount-all.png')"
                  :lazy-href="require('~/assets/images/icon/logo.png')"
                />
                <image
                  x="270"
                  y="10"
                  max-width="100px"
                  :href="require('~/assets/images/usercount.png')"
                  :lazy-href="require('~/assets/images/icon/logo.png')"
                />
                <image
                  x="480"
                  y="10"
                  max-width="100px"
                  :href="require('~/assets/images/rewardcount.png')"
                  :lazy-href="require('~/assets/images/icon/logo.png')"
                />
                <text
                  x="10"
                  y="20"
                  fill="rgb(120, 104, 205)"
                  font-family="DB Helvethaica X Bd Cond"
                >
                  <tspan
                    x="65"
                    y="35"
                    font-size="24"
                    fill="white"
                    font-style="italic"
                  >
                    {{ boxcount }} กล่องที่เปิดไปแล้ว
                  </tspan>
                  <tspan
                    x="320"
                    y="36"
                    font-size="24"
                    fill="white"
                    font-style="italic"
                  >
                    {{ usercount }} ผู้เปิดกล่อง
                  </tspan>
                  <tspan
                    x="530"
                    y="35"
                    font-size="24"
                    fill="white"
                    font-style="italic"
                  >
                    {{ total }} เงินรางวัล
                  </tspan>
                </text>
              </svg>
            </v-col>
          </v-row>
        </div>
        <div class="is-hidden-fullhd" id="m_status">
          <img src="~@/assets/images/m_status.png" class="imgbox" />
          <p id="boxcount">{{ boxcount }}</p>
          <p id="usercount">{{ usercount }}</p>
          <p id="total">{{ total }}</p>
        </div>
      </v-row>
      <v-row id="reward">
        <v-col
          cols="12"
          class="is-hidden-touch is-hidden-tablet-only is-hidden-desktop-only is-hidden-widescreen-only"
          v-if="rewardList"
          style="margin-top: -20px;"
        >
          <v-slide-group multiple show-arrows dark>
            <v-slide-item
              v-for="(item, index) in rewardList"
              :key="item.id + 10"
            >
              <div class="main-box" v-if="index">
                <div id="item-sd" class="overlay">
                  <img
                    id="item-sd"
                    class="icon-reward"
                    src="~@/assets/images/icon_reward.png"
                  />
                  <img
                    v-if="item.rate_id == 1"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/common_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 2"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/rare_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 3"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/epic_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 4"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/legend_bg.png"
                  />

                  <img id="item-pic" class="icon-item" :src="item.item_pic" />
                  <img id="box-pic" class="icon-item" :src="item.box_pic" />
                  <img class="icon-avatar" :src="item.user_pic" />
                  <p class="Price">$ {{ item.item_price }}</p>
                </div>
              </div>
            </v-slide-item>
          </v-slide-group>
        </v-col>
        <v-col cols="12" class="is-hidden-fullhd" v-if="rewardList">
          <v-slide-group multiple show-arrows dark>
            <v-slide-item
              v-for="(item, index) in rewardList"
              :key="item.id + 20"
            >
              <div class="main-box" v-if="index >= 0">
                <div id="item-sd" class="overlay">
                  <img
                    id="item-sd"
                    class="icon-reward"
                    src="~@/assets/images/icon_reward.png"
                  />
                  <img
                    v-if="item.rate_id == 1"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/common_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 2"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/rare_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 3"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/epic_bg.png"
                  />
                  <img
                    v-if="item.rate_id == 4"
                    id="item-sd"
                    class="reward-bg"
                    src="~@/assets/images/reward/legend_bg.png"
                  />
                  <img id="item-pic" class="icon-item" :src="item.item_pic" />
                  <img id="box-pic" class="icon-item" :src="item.box_pic" />
                  <img class="icon-avatar" :src="item.user_pic" />
                  <p class="Price">$ {{ item.item_price }}</p>
                </div>
              </div>
            </v-slide-item>
          </v-slide-group>
        </v-col>
      </v-row>
    </v-contrainer>
  </section>
</template>
<script>
export default {
  name: "playgame",
  components: {},
  data() {
    return {
      rewardList: [],
      boxcount: "0",
      usercount: "0",
      total: ""
    };
  },
  created() {
    this.getLuckyUser();
  },
  mounted() {
    setInterval(() => {
      this.getLuckyUser();
    }, 5000);
  },
  methods: {
    getLuckyUser() {
      const vm = this;
      vm.$axios
        .$get("/general/lucky-user")
        .then(res => {
          vm.checkFirst ? "" : (vm.$nuxt.$loading.show = false);
          vm.checkFirst = false;
          vm.rewardList = res.data.lucky_user;
          vm.boxcount = res.data.boxcount[0].boxcount;
          vm.total = res.data.boxcount[0].total;
          vm.usercount = res.data.usercount[0].users_total;
        })
        .catch(e => {
          console.log(e.message);
        });
    }
  }
};
</script>

<style lang="scss" scoped>
@mixin fontNav($size, $weight, $color, $style) {
  font-family: "Prompt-Regular";
  font-size: $size;
  font-weight: $weight;
  font-style: $style;
  font-stretch: normal;
  line-height: 1;
  letter-spacing: normal;
  color: $color;
}

@mixin bgcolorall($colorOne, $colorTwo) {
  background: linear-gradient(to top right, $colorOne, $colorTwo);
}

#m_status {
  .imgbox {
    position: absolute;
    margin-top: -135px;
    right: 0px;
  }

  #boxcount {
    position: absolute;
    margin-top: -125px;
    right: 55px;
    font-size: 20px;
    font-style: italic;
    font-family: "DB Helvethaica X Bd Cond";
    color: rgb(255, 255, 255);
    text-align: left;
    text-transform: uppercase;
    line-height: 1.2;
  }

  #usercount {
    position: absolute;
    margin-top: -83px;
    right: 70px;
    font-size: 20px;
    font-style: italic;
    text-align: left;
    font-family: "DB Helvethaica X Bd Cond";
    color: rgb(255, 255, 255);
    text-transform: uppercase;
    line-height: 1.2;
  }

  #total {
    position: absolute;
    margin-top: -43px;
    right: 28px;
    font-size: 20px;
    font-style: italic;
    text-align: left;
    font-family: "DB Helvethaica X Bd Cond";
    color: rgb(255, 255, 255);
    text-transform: uppercase;
    line-height: 1.2;
  }
}

.bg-reward {
  background: -webkit-linear-gradient(
    180deg,
    rgb(31, 8, 94) 0%,
    rgb(31, 8, 94) 50%,
    rgb(76, 22, 224) 100%
  );
}

.main-reward {
  .icon-reward-st {
    position: absolute;
    left: 400px;
    bottom: 260px;
  }

  .bg-reward-st {
    position: absolute;
    height: 300px;
    width: 440px;
  }
}

.test-reward {
  position: fixed;
  top: 0px;
  left: calc(50% - 200px);
  z-index: 99;
}

#reward {
  overflow: hidden;
  margin: 0px;
  .nav-mobile {
    position: absolute;
    z-index: 30;
  }

  .main-box {
    float: left;
    border-radius: 12px;
    position: relative;

    #item-sd {
      margin-top: 15px;
      margin-left: 15px;
      margin-right: 8px;
      margin-bottom: 10px;

      .icon-reward {
        position: absolute;
        top: 20px;
        left: 30px;
        width: 35px;
        transition: -webkit-transform 0.2s linear 0.1s;
      }

      .icon-avatar {
        position: absolute;
        border-radius: 50%;
        top: 180px;
        right: 2px;
        width: 33px;
        height: 32px;
      }

      .icon-item {
        position: absolute;
        top: 10px;
        transform: matrix(0.8, 0, 0, 0.8, 0, 0);
        left: calc(50% - 88px);
      }

      .Price {
        top: 200px;
        left: calc(50% - 15px);
        border-radius: 10px;
        background-color: rgb(255, 73, 49);
        width: 60px;
        height: 18px;
      }

      #box-pic {
        opacity: 0;
        transition: opacity 0.5s linear 1s;
        transition: transform 0.2s linear 0.1s;
        top: 20px;
        transform: matrix(0.8, 0, 0, 0.8, 0, 0);
        left: calc(50% - 82px);
      }

      &:hover {
        cursor: pointer;

        #box-pic {
          display: inline-block;
          opacity: 1;
          transform: matrix(1, 0, 0, 1, 0, 0);
        }

        #item-pic {
          opacity: 0;
          transform: matrix(0.3, 0, 0, 0.3, 0, 0);
        }

        .icon-reward {
          transform: matrix(1, -0.2, 0.2, 1, 0, 0);
        }
      }
    }

    #item-st {
      transform: matrix(1.1, -0, 0, 1.1, 0, 0);
      width: 380px;
      margin-top: 15px;
      margin-left: 50px;
      margin-right: 35px;
      margin-bottom: 10px;
    }

    #box-pic {
      opacity: 0;
      transition: opacity 0.5s linear 1s;
      transition: transform 0.5s linear 0.2s;
      top: 10px;
      left: calc(50% - 110px);
    }

    #item-pic {
      opacity: 1;
      transition: opacity 0.1s linear 0.2s;
    }

    &:hover {
      cursor: pointer;

      #box-pic {
        display: inline-block;
        opacity: 1;
        transform: matrix(1.2, 0, 0, 1.2, 0, 0);
      }

      #item-pic {
        opacity: 0;
        transform: matrix(0.8, 0, 0, 0.8, 0, 0);
      }

      .icon-reward {
        transform: matrix(1, -0.2, 0.2, 1, 0, 0);
      }
    }

    .overlay {
      max-width: 351px;
    }

    .reward-bg {
      width: 100%;
      height: 100%;
    }

    .icon-reward {
      position: absolute;
      top: 10px;
      left: 15px;
      transition: -webkit-transform 0.2s linear 0.1s;
    }

    .icon-avatar {
      position: absolute;
      border-radius: 50%;
      top: 140px;
      right: 15px;
      width: 55px;
      height: 52px;
    }

    .icon-item {
      position: absolute;
      left: calc(50% - 120px);
    }
  }

  .Price {
    font-size: 17px;
    font-family: "DB Helvethaica X Bd Cond";
    color: rgb(255, 255, 255);
    text-transform: uppercase;
    line-height: 1.2;
    text-align: center;
    position: absolute;
    top: 170px;
    left: calc(50% - 41px);
    border-radius: 10px;
    background-color: rgb(255, 73, 49);
    width: 60px;
    height: 17px;
  }
}

.row-test {
}

@media (max-width: 767px) {
  .card-img {
    height: 100px;
  }

  .user-reward:nth-child(1) {
    margin-right: 0px !important;
  }

  .user-reward:nth-child(4) {
    margin-right: 10px;
  }

  .icon-hover {
    width: 18px;
    margin-left: -10px;
    margin-top: 0 !important;
  }

  .col-3 {
    padding-right: 0;
  }

  .hide-box-mobile {
    display: none;
  }

  .big-avatar {
    width: 7vw !important;
    height: 7vw !important;
    min-width: 7vw !important;
  }

  .small-avatar {
    width: 5vw !important;
    height: 5vw !important;
    min-width: 5vw !important;
  }

  .show-user-reward-box {
    .small-img {
      max-width: 24.2%;

      .icon-hover {
        margin-top: 5px !important;
        margin-right: -5px !important;
      }

      .icon-hover,
      .username-hover {
        top: 24px;
        font-size: 1.2vw !important;
      }

      .hover-profile {
        display: flex;
        margin-top: -10px;
      }

      .user-pic-hover {
        margin-top: -10px !important;
      }
    }

    .big-img {
      .hover-profile {
        margin-top: -12px;
      }
    }

    .icon-hover {
      margin-top: 6px;
      margin-right: -5px;
    }

    .icon-hover,
    .username-hover {
      top: 24px;
      font-size: 1.2vw !important;
    }

    .user-pic-hover {
      width: 40%;
      max-height: 30px;
    }

    .first-child-user-pic-hover {
      max-height: 50% !important;
      width: 60% !important;
      margin-top: -10px !important;
    }
  }
}

@media (min-width: 768px) and (max-width: 1024px) {
  .user-reward-col:nth-child(6) {
    margin-right: 12px;
  }

  .hide-box-tablet {
    display: none;
  }

  .show-user-reward-box {
    .small-img {
      max-width: 15%;
    }

    .icon-hover,
    .username-hover {
      top: 24px;
      font-size: 1vw !important;
    }

    .user-pic-hover {
      width: 50% !important;
      height: 40% !important;
    }

    .first-child-user-pic-hover {
      max-height: 45% !important;
      max-width: 60% !important;
    }
  }
}

@media (min-width: 1025px) {
  .show-user-reward-box {
    .small-img {
      max-width: 13%;
    }
  }
}

@media only screen and (min-width: 1264px) {
  .show-user-reward-box {
  }
}

@media only screen and (min-width: 1440px) {
  .show-user-reward-box {
  }
}

@media (min-width: 2561px) {
  .show-user-reward-box {
    .small-img {
      max-width: 15%;
    }
  }
}
</style>
<style lang="scss">
@mixin fontFunc($size, $weight, $color, $style) {
  font-family: "Prompt-Regular";
  font-size: $size;
  font-weight: $weight;
  font-style: $style;
  font-stretch: normal;
  line-height: 1;
  letter-spacing: normal;
  color: $color;
}

@media not all and (min-resolution: 0.001dpcm) {
  #boxzaSystem {
    height: 100% !important;
  }
}

.v-dialog {
  border-radius: 15px;
}

#boxzaSystem {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;

  .v-dialog.v-dialog--active.v-dialog--persistent {
    z-index: auto !important;
  }

  @media only screen and (max-width: 770px) {
  }

  @media only screen and (max-width: 768px) {
    .detail-method span {
      font-size: 14px !important;
    }
  }

  @media only screen and (min-width: 769px) and (max-width: 1303px) {
    .detail-method span {
      font-size: 1.1vw !important;
    }

    .title-method-box {
      font-size: 1.6vw !important;
    }
  }

  @media only screen and (min-width: 771px) {
    // #bodyContent section {
    //   padding: 30px;
    //   margin: 70px;
    // }
  }

  @media only screen and (min-width: 1024px) {
    // #bodyContent section {
    //   padding: 30px;
    //   margin: 100px;
    // }
  }

  @media only screen and (max-width: 1474px) {
    .detail-method.image-dot {
      display: none !important;
    }
  }

  @media only screen and (min-width: 1475px) and (max-width: 1603px) {
    .detail-method span {
      font-size: 16px !important;
    }
  }

  #howToPlay {
    width: 100%;
    cursor: default;
    position: relative;

    .columns {
      margin-top: -1px;
      margin-bottom: 0px;
    }

    .title-method-box {
      @include fontFunc(18px, normal, white, italic);
      text-decoration: none !important;
      display: flex;
      text-align: center;
      justify-content: center;
      align-items: center;
      line-height: 1.7 !important;
      color: white;
      padding-right: 0 !important;
      background-image: linear-gradient(180deg, #e64a00, #b339c9);
    }

    .title-method-box:hover {
      background-image: linear-gradient(180deg, #943001, #5d1f68);
    }

    .detail-method {
      padding-left: 20px;
      line-height: 1.7 !important;
      background: linear-gradient(180deg, #fffd1b, #ffe421);
      @include fontFunc(18px, bold, black, italic);

      .detail-regis-text {
        cursor: pointer;
        border-bottom: 1px solid currentColor;
        color: #0066ff;
      }

      .footer-icon {
        margin-right: 10px;
        width: 30px;
        height: 24px;
      }
    }

    .detail-method.image-dot {
      display: flex;
      align-items: center;
    }
  }

  #bodyContent {
    position: relative;
    height: auto;
    flex: 1;
    flex-grow: 1;
    display: block;
    width: 100%;
    padding: 0px !important;
    background: url("~@/assets/images/bg.png");

    .__nuxt-error-page {
      position: relative !important;
      height: 500px;
    }
  }
}
</style>
